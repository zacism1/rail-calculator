<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curve Elevation Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="background-img"></div>
    <div class="container">
        <nav>
            <a href="index.html" class="nav-btn">Materials</a>
            <a href="ballast.html" class="nav-btn">Ballast</a>
            <a href="curve.html" class="nav-btn active">Curve Elevation</a>
            <a href="destress.html" class="nav-btn">Destress</a>
            <a href="verse.html" class="nav-btn">VERSE</a>
        </nav>
        <div class="header">
            <button class="info-btn" onclick="showInfo()">ℹ️</button>
        </div>
        <div class="input-row">
            <input type="text" id="radius" placeholder="Curve radius (m)">
            <input type="text" id="speed" placeholder="Track speed (km/h)">
            <button class="calc-btn" onclick="calculate()">Calculate</button>
        </div>
        <div class="results" id="results">
            <div class="result-item" id="elevation"></div>
            <div class="result-item" id="transition"></div>
        </div>
        <div class="bottom-row">
            <button class="copy-btn" onclick="copyResults()" id="copyBtn">Copy</button>
        </div>
    </div>
    <!-- Info Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('infoModal')">&times;</span>
            <h2>Info</h2>
            <p>Superelevation E (mm) = 11.8 * V² / R, where V is speed in km/h, R is radius in m, for standard gauge 1435mm. This is the equilibrium superelevation where centripetal force is balanced without lateral force on rails. Transition length L (m) = 0.0111 * E * V, approximate for Australian non-high-speed rail.</p>
        </div>
    </div>
    <script>
        let resultsCopied = false;
        function showInfo() {
            document.getElementById('infoModal').style.display = 'block';
        }
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        function calculate() {
            const radiusStr = document.getElementById('radius').value;
            const speedStr = document.getElementById('speed').value;
            const R = parseFloat(radiusStr);
            const V = parseFloat(speedStr);
            if (isNaN(R) || isNaN(V) || R <= 0 || V <= 0) return;
            const E = 11.8 * V * V / R;
            const L = 0.0111 * E * V;
            // Display results
            document.getElementById('elevation').innerHTML = `*Superelevation: ${E.toFixed(0)} mm`;
            document.getElementById('transition').innerHTML = `*Transition length: ${L.toFixed(0)} m`;
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').classList.add('show');
            resultsCopied = false;
            document.getElementById('copyBtn').classList.remove('disabled');
        }
        function copyResults() {
            if (resultsCopied) return;
            const resultsDiv = document.getElementById('results');
            let text = '';
            for (let child of resultsDiv.children) {
                text += child.innerText + '\n';
            }
            navigator.clipboard.writeText(text);
            resultsCopied = true;
            document.getElementById('copyBtn').classList.add('disabled');
        }
    </script>
</body>
</html>
